<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fireflies</title>
    <link rel="icon" href="favicon.ico"> 

    <style>
        * {
            margin: 0;
            text-align: center;
            color: white;
            font-family:'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
        }

        html, body {
            height: 100%;
        }

        #container {
            width: 100%;
        }

        #wholeCan {
            background-color: black;
            display: block;
        }

        header {
            background-color: black;
            border-bottom: 2px solid white;
            padding: 0.2rem 0.6rem;
            display: flex;
            justify-content: space-between;
        }

        .selections {
            padding: 0.2rem 0.6rem;
        }

        #favivi {
            width: 15%;
        }

        #red {
            background-color: rgb(110, 0, 0);
            height: 2rem;
            width: 2rem;
            border: 1px solid white;
        }

        #orange {
            background-color: rgb(151, 98, 0);
            height: 2rem;
            width: 2rem;
            border: 1px solid white;
        }

        #yellow {
            background-color: rgb(82, 82, 0);
            height: 2rem;
            width: 2rem;
            border: 1px solid white;
        }

        #green {
            background-color: rgb(0, 77, 0);
            height: 2rem;
            width: 2rem;
            border: 1px solid white;
        }

        #blue {
            background-color: rgb(0, 27, 63);
            height: 2rem;
            width: 2rem;
            border: 1px solid white;
        }

        #purple {
            background-color: rgb(41, 0, 65);
            height: 2rem;
            width: 2rem;
            border: 1px solid white;
        }

        #pink {
            background-color: rgb(63, 0, 37);
            height: 2rem;
            width: 2rem;
            border: 1px solid white;
        }

        #white {
            background-color: rgb(255, 255, 255);
            height: 2rem;
            width: 2rem;
            border: 1px solid white;
        }

        #glow {
            background-color: black;
            border: none;
            font-size: 2rem;
        }

        #logo {
            display: flex;
            align-items: center;
            transform: translateX(45%);
        }
    </style>
</head>
<body>
    <header>
        <div class="selections">
            <button id="red"></button>
            <button id="orange"></button>
            <button id="yellow"></button>
            <button id="green"></button>
            <button id="blue"></button>
            <button id="purple"></button>
            <button id="pink"></button>
            <button id="white"></button>
        </div>
        <div id="logo">
            <img src="favivi.png" alt="icon" id="favivi">
            <h2>Fireflies</h2>
        </div>
    </header>
    <div id="container">
        <canvas id="wholeCan"></canvas>
    </div>

    <script>
        const canvas = document.getElementById('wholeCan');
        const c = canvas.getContext('2d');

        const red = document.getElementById('red');
        const orange = document.getElementById('orange');
        const yellow = document.getElementById('yellow');
        const green = document.getElementById('green');
        const blue = document.getElementById('blue');
        const purple = document.getElementById('purple');
        const pink = document.getElementById('pink');
        const white = document.getElementById('white');

        let isDrawing = false;
        let spawnTimer = 0;

        let circles = [];
        let circleColor = "white";

        canvas.width  = window.innerWidth;
        canvas.height = window.innerHeight;

        let mouseX = 0;
        let mouseY = 0;

        let mouse = { x: 0, y: 0 }

        const MAX_CIRCLES = 125;

        document.addEventListener("mousemove", (event) => {
            const rect = canvas.getBoundingClientRect();
            mouse.x = event.clientX - rect.left;
            mouse.y = event.clientY - rect.top;
        });

        setInterval(() => {
            console.log(mouseX, mouseY)
        }, 25);

        function spawnCircle() {
            const side = Math.floor(Math.random() * 4); // 0=top, 1=right, 2=bottom, 3=left
            let x, y;

            if (circles.length < MAX_CIRCLES) {
                switch (side) {
                    case 0:
                    x = Math.random() * canvas.width;
                    y = -20;
                    break;
                    case 1:
                    x = canvas.width + 20;
                    y = Math.random() * canvas.height;
                    break;
                    case 2:
                    x = Math.random() * canvas.width;
                    y = canvas.height + 20;
                    break;
                    case 3:
                    x = -20;
                    y = Math.random() * canvas.height;
                    break;
                }
            }

            circles.push({ x, y, radius: 5 });
        }

        function draw() {
            c.globalCompositeOperation = 'destination-out';
            c.fillStyle = 'rgba(0, 0, 0, 0.4)';
            c.fillRect(0, 0, canvas.width, canvas.height);

            c.globalCompositeOperation = 'lighter';
            circles.forEach(circle => {
                circle.x += (mouse.x - circle.x) * 0.01 + Math.sin(Date.now() / 500) * 0.5;
                circle.y += (mouse.y - circle.y) * 0.01 + Math.cos(Date.now() / 500) * 0.5;

                c.globalAlpha = 0.4;
                c.beginPath();
                c.arc(circle.x, circle.y, circle.radius, 0, Math.PI * 2);
                c.fillStyle = circleColor;
                c.shadowBlur = 20;
                c.shadowColor = circleColor;
                c.fill();
            });

            circles = circles.filter(circle => circle.y < canvas.height + 50);
            requestAnimationFrame(draw);
        }

        setInterval(spawnCircle, 800);
        draw();

        red.addEventListener("click", () => {
            circleColor = "rgba(255, 163, 163, 0.8)";
        })

        orange.addEventListener("click", () => {
            circleColor = "rgba(255, 210, 163, 0.8)";
        })

        yellow.addEventListener("click", () => {
            circleColor = "rgba(255, 252, 163, 0.8)";
        })

        green.addEventListener("click", () => {
            circleColor = "rgba(176, 255, 163, 0.8)";
        })

        blue.addEventListener("click", () => {
            circleColor = "rgba(163, 210, 255, 0.8)";
        })

        purple.addEventListener("click", () => {
            circleColor = "rgba(197, 163, 255, 0.8)";
        })

        pink.addEventListener("click", () => {
            circleColor = "rgba(254, 163, 255, 0.8)";
        })

        white.addEventListener("click", () => {
            circleColor = "white";
        })
    </script>
</body>
</html>
